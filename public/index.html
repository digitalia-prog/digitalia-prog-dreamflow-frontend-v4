<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Dreamflow UGC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f0f1a;
      color: #ffffff;
      padding: 40px;
    }
    textarea {
      width: 100%;
      height: 120px;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 8px;
      font-size: 14px;
    }
    button {
      padding: 12px 20px;
      background: #7c3aed;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }
    pre {
      white-space: pre-wrap;
      background: #1a1a2e;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }
  </style>
</head>

<body>

  <h1>üöÄ Dreamflow UGC</h1>

  <textarea id="prompt" placeholder="D√©cris ton produit / id√©e..."></textarea>
  <br />
  <button id="generate">G√©n√©rer</button>

  <pre id="output">Ton script appara√Ætra ici...</pre>

  <script>
    (function () {
      const btn = document.getElementById('generate');
      const out = document.getElementById('output');

      if (!btn || !out) {
        console.error("‚ùå Bouton ou output introuvable");
        return;
      }

      btn.addEventListener('click', async () => {
        const promptEl = document.getElementById('prompt');
        const prompt = promptEl ? promptEl.value : '';

        out.textContent = '‚è≥ G√©n√©ration...';

        try {
          const res = await fetch('/api/generate', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ prompt })
          });

          const data = await res.json();

          if (!res.ok) {
            out.textContent = '‚ùå Erreur API';
            console.error(data);
            return;
          }

          out.textContent = data.content || '‚ùå Aucun contenu g√©n√©r√©';
        } catch (e) {
          out.textContent = '‚ùå Erreur r√©seau';
          console.error(e);
        }
      });

      console.log("‚úÖ Script front propre charg√©");
    })();
  </script>

</body>
</html>

