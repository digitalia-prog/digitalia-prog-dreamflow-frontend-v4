<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Dreamflow UGC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background:#0f0f1a;
      color:#fff;
      padding:40px;
    }
    button {
      padding:12px 20px;
      background:#7c3aed;
      color:white;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-size:16px;
    }
    textarea {
      width:100%;
      height:120px;
      margin-bottom:12px;
      border-radius:8px;
      padding:10px;
      font-size:14px;
    }
    pre {
      white-space:pre-wrap;
      background:#1a1a2e;
      padding:20px;
      border-radius:10px;
      margin-top:20px;
    }
  </style>
</head>

<body>

<h1>üöÄ Dreamflow UGC</h1>

<textarea id="prompt" placeholder="D√©cris ton produit / id√©e..."></textarea>
<br />
<button id="generate">G√©n√©rer</button>

<pre id="output">Ton script appara√Ætra ici...</pre>

<script>
const btn = document.getElementById('generate');
const out = document.getElementById('output');

btn.addEventListener('click', async () => {
  const prompt = document.getElementById('prompt').value;

  out.textContent = '‚è≥ G√©n√©ration...';

  try {
    const response = await fetch('/api/generate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ prompt })
    });

    const data = await response.json();

    if (!response.ok) {
      out.textContent = '‚ùå Erreur API';
      return;
    }

    const script =
      data.result ||
      data.text ||
      data.script ||
      data.content ||
      '‚ùå Aucun contenu g√©n√©r√©';

    out.textContent = script;

  } catch (err) {
    out.textContent = '‚ùå Erreur r√©seau';
    console.error(err);
  }
});
</script>

</body>
</html>

